<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Task Timeline Dashboard</title>
<style>
  :root {
    --bg: #2a1b2e;
    --bar-work: #8e24aa;
    --bar-personal: #7b1fa2;
    --bar-family: #9c27b0;
    --bar-sports: #ba68c8;
    --bar-seasonal: #ab47bc;
    --text: #f3e5f5;
    --line-today: red;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    margin-bottom: 20px;
  }

  .timeline-wrapper {
    position: relative;
    width: 100%;
    overflow-x: auto;
    overflow-y: auto;
    border: 1px solid #555;
    padding: 20px;
    box-sizing: border-box;
    max-height: 80vh;
    background: #3b2640;
  }

  .timeline {
    position: relative;
    width: 1200px; /* adjustable timeline width */
  }

  .task-row {
    position: relative;
    margin-bottom: 20px;
    height: 30px;
  }

  .task-bar {
    position: absolute;
    height: 24px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding-left: 5px;
    font-size: 0.85em;
    color: #fff;
    box-sizing: border-box;
  }

  .today-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--line-today);
    z-index: 10;
  }

  .legend {
    margin: 10px 0;
  }

  .legend span {
    display: inline-block;
    width: 15px;
    height: 15px;
    margin-right: 5px;
    border-radius: 3px;
  }

  .controls {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    flex-wrap: wrap;
    gap: 10px;
  }

  .controls button {
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    background: var(--bar-work);
    color: #fff;
    cursor: pointer;
  }

  .controls button:hover {
    background: var(--bar-personal);
  }

  a.home-btn {
    display: inline-block;
    margin-bottom: 15px;
    color: var(--text);
    text-decoration: none;
    font-weight: bold;
  }

</style>
</head>
<body>

<h1>Ongoing Tasks & Seasons Timeline</h1>
<a href="index.html" class="home-btn">&larr; Back to Home</a>

<div class="legend">
  <span style="background: var(--bar-work)"></span> Work
  <span style="background: var(--bar-personal)"></span> Personal
  <span style="background: var(--bar-family)"></span> Family
  <span style="background: var(--bar-sports)"></span> Sports
  <span style="background: var(--bar-seasonal)"></span> Seasonal
</div>

<div class="timeline-wrapper">
  <div class="timeline" id="timeline"></div>
  <div class="today-line" id="today-line"></div>
</div>

<script>
const timelineEl = document.getElementById('timeline');
const todayLineEl = document.getElementById('today-line');

const tasks = [
  {name: "Fantasy Football", category:"Sports", start:"2025-09-01", end:"2026-01-15"},
  {name: "College Basketball Season", category:"Sports", start:"2025-11-01", end:"2026-03-15"},
  {name: "Spooky Season", category:"Seasonal", start:"2025-10-01", end:"2025-10-31"},
  {name: "Personal Project A", category:"Personal", start:"2025-02-01", end:"2025-12-31"},
  {name: "Work Quarterly Goals", category:"Work", start:"2025-01-01", end:"2025-03-31"},
  {name: "Family Vacation", category:"Family", start:"2025-07-10", end:"2025-07-20"}
];

// timeline range (1 year)
const timelineStart = new Date("2025-01-01");
const timelineEnd = new Date("2025-12-31");
const timelineWidth = 1200; // in px

function dateToX(dateStr){
  const d = new Date(dateStr);
  const totalMs = timelineEnd - timelineStart;
  const msFromStart = d - timelineStart;
  return (msFromStart/totalMs)*timelineWidth;
}

function renderTasks(){
  timelineEl.innerHTML = '';
  tasks.forEach((t,i)=>{
    const row = document.createElement('div');
    row.className = 'task-row';
    row.style.top = (i*40)+'px';
    const bar = document.createElement('div');
    bar.className = 'task-bar';
    // set color
    switch(t.category){
      case 'Work': bar.style.background='var(--bar-work)'; break;
      case 'Personal': bar.style.background='var(--bar-personal)'; break;
      case 'Family': bar.style.background='var(--bar-family)'; break;
      case 'Sports': bar.style.background='var(--bar-sports)'; break;
      case 'Seasonal': bar.style.background='var(--bar-seasonal)'; break;
      default: bar.style.background='#888';
    }
    // set position and width
    const xStart = dateToX(t.start);
    const xEnd = dateToX(t.end);
    bar.style.left = xStart+'px';
    bar.style.width = (xEnd - xStart)+'px';
    bar.innerText = `${t.name} (${calcProgress(t)}%)`;
    row.appendChild(bar);
    timelineEl.appendChild(row);
  });
  // set today line
  const today = new Date();
  const xToday = dateToX(today.toISOString().slice(0,10));
  todayLineEl.style.left = xToday+'px';
  todayLineEl.style.height = (tasks.length*40)+'px';
}

function calcProgress(t){
  const now = new Date();
  const start = new Date(t.start);
  const end = new Date(t.end);
  if(now<start) return 0;
  if(now>end) return 100;
  return Math.round((now-start)/(end-start)*100);
}

renderTasks();
</script>

</body>
</html>
